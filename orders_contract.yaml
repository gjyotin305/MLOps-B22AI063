dataContractSpecification: 0.9.3
id: urn:datacontract:retail:orders
version: 1.0.0

info:
  title: "E-commerce Orders"
  description: |
    Near real-time orders feed for marketing dashboards.
    Maps physical status codes to logical status values.
  owner: "Data Engineering Team"
  contact:
    name: "Orders Data Steward"
    email: "data-eng@retailco.com"
    slack: "#orders-data"
  classification: internal
  tags: [orders, ecommerce, dashboard]

schema:
  type: object
  properties:
    order_total_usd:
      type: number
      description: "Order total in USD."
      minimum: 0
      pii: false
      physical_mapping: o_total
    status:
      type: string
      enum: [PAID, SHIPPED, CANCELLED]
      description: "Logical order status mapped from status_code."
      pii: false
      physical_mapping: status_code (2=PAID, 5=SHIPPED, 9=CANCELLED)
  required:
    - order_total_usd
    - status

sla:
  freshness:
    threshold: "5 minutes"
    description: "Dashboard requires near real-time updates."
  availability:
    percentage: "99.9%"
    description: "High availability for marketing decisions."
  retention:
    period: "90 days"
    description: "Short-term retention for campaign analysis."

quality:
  - name: order_total_non_negative
    type: validity
    expression: "order_total_usd >= 0"
    threshold: "100%"
    enforcement: hard
    description: "Order total must not be negative."
  - name: status_code_valid
    type: validity
    expression: "status IN ('PAID', 'SHIPPED', 'CANCELLED')"
    threshold: "100%"
    enforcement: hard
    description: "Reject any unmapped status_code (only 2, 5, 9 allowed)."
